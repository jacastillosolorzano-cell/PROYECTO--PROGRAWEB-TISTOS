import{d as m,r as c,u as y,j as e,e as M,f as N,L as z}from"./index-ByqtMrcU.js";import{B as l}from"./button-so4-oYWo.js";import{B as L}from"./BottomNav-CnqUNEP4.js";import{u as P}from"./use-user-DDbTypsv.js";import{B as A}from"./config-9OvXtyrZ.js";import{D,a as E,b as _,c as G}from"./dialog-CR6emVCc.js";import{H as O,S as H}from"./HeaderSaldo-BDITltZ7.js";import{A as $}from"./arrow-left-c2kPTsck.js";import"./coins-B2Ipv48M.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=m("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=m("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=m("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=m("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=m("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=m("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=m("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function V(){const[o,i]=c.useState(!1),d=y(),s=()=>{console.log("Sesion Cerrada"),localStorage.clear(),d("/login"),i(!1)};return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(l,{variant:"ghost",className:"justify-start w-full px-6 py-4 text-left",onClick:()=>{i(!0)},children:[e.jsx(U,{className:"w-5 h-5 mr-2"})," Cerrar Sesion"]}),e.jsx(D,{open:o,onOpenChange:i,children:e.jsx(E,{className:"sm:max-w-md",children:e.jsxs(_,{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Estas a punto de Cerrar Sesion"}),e.jsxs(G,{className:"mt-4 flex justify-end space-x-2",children:[e.jsx(l,{variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),e.jsx(l,{variant:"destructive",onClick:s,children:"Si, cerrar sesion"})]})]})})})]})}function F({userId:o}){const[i,d]=c.useState([]);return c.useEffect(()=>{if(!o)return;let s=!0;return(async()=>{try{const a=await fetch(`${A}/usuarios/${o}/progreso`);if(!a.ok){console.warn("No se pudo obtener progreso desde backend",await a.text());return}const n=await a.json();if(!s)return;d(n||[])}catch(a){console.error("Error al obtener progreso:",a)}})(),()=>{s=!1}},[o]),!i||i.length===0?null:e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Progreso por canal"}),e.jsx("div",{className:"space-y-3",children:i.map(s=>{const a=s.nivel,n=s.streamer,r=s.puntos_actuales||0,x=(a==null?void 0:a.puntos_requeridos)??1e3,u=Math.max(x-r,0),h=Math.min(Math.round(r/x*100),100);return e.jsxs("div",{className:"bg-muted p-3 rounded",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("div",{className:"font-medium",children:(n==null?void 0:n.nombre)||(n==null?void 0:n.id_usuario)||"Streamer"}),e.jsxs("div",{className:"text-muted-foreground",children:[r," / ",x]})]}),e.jsx("div",{className:"w-full bg-black/10 rounded-full h-2 mb-1",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full",style:{width:`${h}%`}})}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Faltan ",u,' puntos para "',(a==null?void 0:a.nombre_nivel)||"siguiente nivel",'"']})]},s.id_progreso)})})]})}const se=()=>{const o=y(),[i,d]=c.useState(!1),{user:s,updatePoints:a}=P(),{toast:n}=M(),r={nombre:"ulima123",avatar:"https://is1-ssl.mzstatic.com/image/thumb/Purple211/v4/af/ba/26/afba2629-ac1e-01c3-dce7-293a45a2bc48/AppIcon-0-1x_U007epad-0-1-0-85-220-0.png/230x0w.webp",seguidores:999,seguidos:999,meGusta:999},x=`profile_description_${(s==null?void 0:s.name)??r.nombre}`,[u,h]=c.useState(""),[w,p]=c.useState(!1),[g,f]=c.useState("");c.useEffect(()=>{const t=localStorage.getItem(x);t&&h(t)},[x]);const k=()=>{f(u),p(!0)},C=()=>{const t=g.trim();h(t),localStorage.setItem(x,t),p(!1),n({title:"Descripci贸n guardada",description:t?"Tu descripci贸n se actualiz贸 correctamente.":"Descripci贸n eliminada.",duration:2500})},j=()=>{f(""),p(!1)},S=()=>{const t=a==null?void 0:a("login");n({title:"隆Progreso Actualizado!",description:`Ganaste 100 puntos. Total: ${N(((s==null?void 0:s.points)??0)+100)} `,duration:3e3}),t!=null&&t.didLevelUp&&n({title:"隆Felicidades! ",description:`Has subido al Nivel ${t.newLevel}! Sigue participando para m谩s recompensas.`,duration:4e3})};return e.jsxs("div",{className:"min-h-screen bg-background relative flex flex-col",children:[e.jsx(l,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 z-10",onClick:()=>o(-1),children:e.jsx($,{className:"w-5 h-5"})}),e.jsx(O,{}),e.jsx(l,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-10",onClick:()=>d(!i),children:e.jsx(R,{className:"w-6 h-6"})}),i&&e.jsxs("div",{className:"fixed top-0 right-0 h-full w-56 bg-card shadow-lg z-20 flex flex-col pt-16 animate-slide-in",children:[e.jsxs(l,{variant:"ghost",className:"justify-start w-full px-6 py-4 text-left",onClick:()=>{d(!1),o("/saldo")},children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),"Ver saldo"]}),e.jsx(V,{}),e.jsxs(l,{variant:"ghost",className:"justify-start w-full px-6 py-4 text-left",onClick:()=>d(!1),children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),"Volver a perfil"]})]}),e.jsxs("div",{className:"flex flex-col items-center pt-16 pb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.avatar,alt:"avatar",className:"w-24 h-24 rounded-full border-4 border-white shadow-lg"}),e.jsx(l,{variant:"secondary",size:"icon",className:"absolute bottom-0 right-0 rounded-full",title:"Agregar foto",children:e.jsx(v,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-2 text-lg font-semibold",children:["@",r.nombre]}),u?e.jsx("p",{className:"mt-2 text-center max-w-xl text-sm text-muted-foreground px-4",children:u}):null,e.jsx("div",{className:"mt-3",children:e.jsx(l,{variant:"outline",size:"sm",onClick:k,children:u?"Editar descripci贸n":"+ Agregar descripci贸n"})})]}),e.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-bold",children:r.seguidos}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Siguiendo"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-bold",children:r.seguidores}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Seguidores"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-bold",children:r.meGusta}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Me gusta"})]})]}),e.jsxs("div",{className:"mx-4 mb-4 bg-card rounded-lg p-4 shadow-sm border",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-yellow-500"}),"Mi Progreso"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.name)??r.nombre]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-yellow-500"}),e.jsx("strong",{children:"Nivel:"})," ",(s==null?void 0:s.level)??1]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-green-500"}),e.jsx("strong",{children:"Puntos:"})," ",N((s==null?void 0:s.points)??0)]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progreso al siguiente nivel"}),e.jsxs("span",{children:[((s==null?void 0:s.points)??0)%1e3," / 1000"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(((s==null?void 0:s.points)??0)%1e3/10,100)}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pr贸ximo nivel en ",1e3-((s==null?void 0:s.points)??0)%1e3," puntos."]})]})]}),e.jsx(F,{userId:s==null?void 0:s.id}),e.jsxs(l,{onClick:S,className:"w-full mt-3 flex items-center gap-2",variant:"default",children:[e.jsx(b,{className:"w-4 h-4"}),"Actualizar Progreso (Gana 100 pts)"]})]}),e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(l,{asChild:!0,variant:"secondary",children:e.jsx(z,{to:"/studio",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),"Tistos Studio"]})})})}),w&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:j}),e.jsxs("div",{className:"relative bg-[#151515] p-6 rounded-lg shadow-xl w-[min(720px,92%)] border border-purple-800",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Editar descripci贸n"}),e.jsx("textarea",{value:g,onChange:t=>f(t.target.value),rows:5,className:"w-full bg-card p-3 rounded-md text-white outline-none",placeholder:"Describe tu canal, horarios, enlaces... (m谩x 300 caracteres)",maxLength:300}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(l,{variant:"ghost",onClick:j,children:"Cancelar"}),e.jsx(l,{onClick:C,children:"Guardar"})]})]})]}),e.jsx("div",{className:"mt-auto",children:e.jsx(L,{})})]})};export{se as default};
