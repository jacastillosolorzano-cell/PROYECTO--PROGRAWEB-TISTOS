import{r as o,u as g,j as e,L as i}from"./index-D2MQMOZd.js";import{B as y}from"./button-qKKvqjFS.js";import{L as d,I as m}from"./label-CUbKW1jk.js";import{B as x}from"./config-9OvXtyrZ.js";import{V as N}from"./video-BsqVYiaR.js";const E=()=>{const[n,p]=o.useState(""),[c,u]=o.useState(""),[l,a]=o.useState(""),h=g(),j=async s=>{s.preventDefault();try{const r=await fetch(`${x}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({correo:n,contrasena:c})});if(r.status===200){const t=await r.json();localStorage.setItem("tistos_current_user",JSON.stringify(t));try{await fetch(`${x}/usuarios/${t.id_usuario}/inicializar-perfil`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch(f){console.error("Error al inicializar perfil:",f)}a(""),h("/index")}else{const t=await r.json();a(t.error||"correo y/o contraseña incorrectos")}}catch(r){a("Error al conectar con el servidor"),console.error(r)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[e.jsx(N,{className:"w-10 h-10 text-primary"}),e.jsx("h1",{className:"text-4xl font-bold gradient-primary bg-clip-text",children:"Tistos"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Inicia sesión para continuar"})]}),e.jsxs("div",{className:"glassmorphism p-8 rounded-2xl space-y-6",children:[e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",children:"Correo"}),e.jsx(m,{id:"email",type:"email",placeholder:"tistos@email.com",value:n,onChange:s=>p(s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"password",children:"Contraseña"}),e.jsx(m,{id:"password",type:"password",placeholder:"Contraseña",value:c,onChange:s=>u(s.target.value),required:!0})]}),l&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:l}),e.jsx(y,{type:"submit",className:"w-full",children:"Iniciar sesión"})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["No tienes una cuenta?"," ",e.jsx(i,{to:"/register",className:"text-primary hover:underline",children:"Regístrate"})]})]}),e.jsxs("div",{className:"mt-8 flex justify-center gap-4 text-sm text-muted-foreground",children:[e.jsx(i,{to:"/about",className:"hover:text-primary transition-colors",children:"Nosotros"}),e.jsx("span",{children:"•"}),e.jsx(i,{to:"/terms",className:"hover:text-primary transition-colors",children:"Términos y condiciones"})]})]})})};export{E as default};
