import{r as t,u as N,j as e,L as y,a as b}from"./index-C3vE6_sk.js";import{B as p}from"./button-B5gIpL2V.js";import{L as c,I as m}from"./label-CcO0LBud.js";import{B as x}from"./config-9OvXtyrZ.js";import{A as w}from"./arrow-left-B_34eWrv.js";import{V as C}from"./video-1HhfXYDU.js";const O=()=>{const[o,h]=t.useState(""),[i,j]=t.useState(""),[n,f]=t.useState(""),[d,a]=t.useState(""),u=N(),g=async s=>{if(s.preventDefault(),!o||!i||!n){a("Completa todos los campos");return}try{const r=await fetch(`${x}/usuarios/crear`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:o,email:i,contra:n,rol:"ESPECTADOR",estado:"ACTIVO"})});if(r.status===200){const l=await r.json();try{await fetch(`${x}/usuarios/${l.id_usuario}/inicializar-perfil`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch(v){console.error("Error al inicializar perfil:",v)}b.success("Usuario creado correctamente"),a(""),setTimeout(()=>u("/login"),900)}else{const l=await r.json();a(l.error||"Error al registrarse")}}catch(r){a("Error al conectar con el servidor"),console.error(r)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background p-4 relative",children:[e.jsx(p,{variant:"ghost",size:"icon",className:"absolute top-4 left-4",onClick:()=>u(-1),children:e.jsx(w,{className:"w-5 h-5"})}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[e.jsx(C,{className:"w-10 h-10 text-primary"}),e.jsx("h1",{className:"text-4xl font-bold gradient-primary bg-clip-text",children:"Tistos"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Crea tu cuenta"})]}),e.jsxs("div",{className:"glassmorphism p-8 rounded-2xl space-y-6",children:[e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"nombre",children:"Nombre"}),e.jsx(m,{id:"nombre",type:"text",placeholder:"nombre o usuario",value:o,onChange:s=>h(s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",children:"Correo"}),e.jsx(m,{id:"email",type:"email",placeholder:"tistos@email.com",value:i,onChange:s=>j(s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"password",children:"Contraseña"}),e.jsx(m,{id:"password",type:"password",placeholder:"Contraseña",value:n,onChange:s=>f(s.target.value),required:!0})]}),d&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:d}),e.jsx(p,{type:"submit",className:"w-full",children:"Registrarse"})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["¿Ya tienes una cuenta?"," ",e.jsx(y,{to:"/login",className:"text-primary hover:underline",children:"Inicia sesión"})]})]})]})]})};export{O as default};
